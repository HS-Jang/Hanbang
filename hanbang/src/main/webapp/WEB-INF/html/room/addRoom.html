<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
  layout:decorator="HeaderLayout">
  <head>
  	<meta charset ="utf-8"/>
<!--     <title>Layout</title> -->
  </head>
  <body>
  	 <h1 layout:fragment="header">매물 등록</h1>
     <div id="addRoomDIV" class="container" layout:fragment="content">
	     <form id="addRoomForm"
          th:action="@{/insertRoom.do}" th:object="${roomVO}"  action="#"  method="post">
					     
<!-- 			<input hidden = "true" th:field="*{id}"/> -->
<!-- 			<input hidden = "true" th:field="*{registerDate}"/> -->
<!-- 			<input hidden = "true" th:field="*{completeDate}"/> -->
		     
		     <div class="wrapper">
		   	 	 <section id="support" class="doublediagonal">
	   	 	 		<div class="container">
		   	 	 		<div class="row">
				   	 	 	<div class="col-md-4 col-sm-4 contact-details scrollpoint sp-effect2">
					            <div class="media">
					                <a class="pull-left">
					                    <i class="fa fa-map-marker fa-2x"></i>
					                </a>
					                <div class="media-body">
					                    <h3 class="media-heading">위치</h3>
					                </div>
					            </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <div class="media feature"><!-- 위치 -->
		                        	 <a class="pull-left" id="popMap">
	                                    <i class="fa fa-map-marker fa-2x"></i>
	                                 </a>
	                                 <div class="media-body">
	                                     <input type="text" class="form-control" th:field="*{address}" style="color:black;"/>
	                                 </div>
	                                 <input hidden ="true" th:field="*{longitude}"></input>
	                                 <input hidden ="true" th:field="*{latitude}"></input>
		                        </div>
		                     </div>
				   	 	 	 <div class="col-md-4 col-sm-4 contact-details scrollpoint sp-effect2">
					            <div class="media feature">
					                <a class="pull-left">
					                    <i class="fa fa-home fa-2x"></i>
					                </a>
					                <div class="media-body">
					                    <h3 class="media-heading">방 구조</h3>
					                </div>
					            </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <div class="media feature"><!-- 방구조 -->
	                                 <div class="form-group">
	                                      <select type="text" class="form-control" th:field="*{roomkind}" style="color:black;"> 
	                                     	<option value="0" class="" >전체</option>
										    <option value="1" selected="selected" class="" >원룸</option>
										    <option value="2" class="" >투룸</option>
										    <option value="3" class="" >쓰리룸이상</option>
	                                     </select>
	                                 </div>
		                        </div>
		                     </div>
				   	 	 	 <div class="col-md-4 col-sm-4 contact-details scrollpoint sp-effect2">
					            <div class="media feature">
					                <a class="pull-left">
					                    <i class="fa fa-money fa-2x"></i>
					                </a>
					                <div class="media-body">
					                    <h3 class="media-heading">월세</h3>
					                </div>
					            </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect2">
		                        <div class="media feature"><!-- 월세 -->
	                                 <div class="form-group">
	                                     <input type="text" class="form-control" th:field="*{monthPay}" style="color:black;"/> 
	                                 </div>
		                        </div>
		                     </div>
				   	 	 	 <div class="col-md-4 col-sm-4 contact-details scrollpoint sp-effect2">
					            <div class="media feature">
					                <a class="pull-left">
					                    <i class="fa fa-money fa-2x"></i>
					                </a>
					                <div class="media-body">
					                    <h3 class="media-heading">보증금</h3>
					                </div>
					            </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect2">
		                        <div class="media feature"><!-- 보증금 -->
	                                 <div class="form-group">
	                                     <input type="text" class="form-control" th:field="*{deposit}" style="color:black;"/> 
	                                 </div>
		                        </div>
		                     </div>
			   	 	    	 <div class="col-md-4 col-sm-4 contact-details scrollpoint sp-effect2">
					            <div class="media feature">
					                <a class="pull-left">
					                    <i class="fa fa-shopping-cart fa-2x"></i>
					                </a>
					                <div class="media-body">
					                    <h3 class="media-heading">거래종류</h3>
					                </div>
					            </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect2">
		                        <div class="media feature"><!-- 거래종류 -->
                                	 <div class="form-group">
	                                     <select type="text" class="form-control" th:field="*{dealKind}" style="color:black;"> 
	                                     	<option value="전체" class="" >전체</option>
										    <option value="전세" class="" >전세</option>
										    <option value="월세" selected="selected" class="" >월세</option>
										    <option value="반월세" class="" >반월세</option>
	                                     </select>
	                                 </div>	
		                        </div>
		                     </div>
				   	 	 	 <div class="col-md-4 col-sm-4 contact-details scrollpoint sp-effect2">
					            <div class="media feature">
	                                 <a class="pull-left" >
	                                     <i class="fa fa-phone fa-2x"></i>
	                                 </a>
	                                 <div class="media-body">
	                                     <h3 class="media-heading">전화번호</h3>
	                                 </div>
	                             </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <div class="media feature"> <!-- 전화번호 -->
	                                 <div class="form-group">
	                                     <input type="text" class="form-control" th:field="*{telNum}" style="color:black;"/>
	                                 </div>
		                        </div>
		                     </div>
				   	 	 	 <div class="col-md-4 col-sm-4 contact-details scrollpoint sp-effect2">
					            <div class="media feature">
	                                 <a class="pull-left" >
	                                     <i class="fa fa-sort fa-2x"></i>
	                                 </a>
	                                 <div class="media-body">
	                                     <h3 class="media-heading">층수</h3>
	                                 </div>
	                             </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <div class="media feature"> <!-- 층수 -->
	                                 <div class="form-group">
	                                     <input type="text" class="form-control" th:field="*{floor}" style="color:black;"/>
	                                 </div>
		                        </div>
		                     </div>
				   	 	 	 <div class="col-md-12 col-sm-12 contact-details scrollpoint sp-effect2">
					            <div class="media feature">
	                                 <a class="pull-left" >
	                                     <i class="fa fa-plus fa-2x"></i>
	                                 </a>
	                                 <div class="media-body">
	                                     <h3 class="media-heading">추가옵션</h3>
	                                 </div>
	                             </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
                                 <a class="pull-left" >
                                     <input type="checkbox" th:field="*{buildingCCTV}"></input>
                                     <!-- th:field="*{buildingCCTV}" -->
                                 </a>
                                 <div class="media-body">
                                     <h3 class="media-heading">건물 내 CCTV</h3>
                                 </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
                                 <a class="pull-left" >
                                     <input type="checkbox" th:field="*{outsideCCTV}"></input>
                                     <!--  -->
                                 </a>
                                 <div class="media-body">
                                     <h3 class="media-heading" >외부(근방100m) CCTV</h3>
                                 </div>
					         </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <a class="pull-left" th:field="*{park}">
                                     <input type="checkbox"></input>
                                 </a>
                                 <div class="media-body">
                                     <h3 class="media-heading">공원</h3>
                                 </div>
		                     </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <a class="pull-left" >
                                     <input type="checkbox" ></input>
                                     <!-- th:field="*{parkinglot}" -->
                                 </a>
                                 <div class="media-body">
                                     <h3 class="media-heading">주차장</h3>
                                 </div>
		                     </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <a class="pull-left" >
                                    <input type="checkbox" ></input>
                                    <!-- th:field="*{pet}" -->
                                 </a>
                                 <div class="media-body">
                                     <h3 class="media-heading">애완동물</h3>
                                 </div>
		                     </div>
		                     <div class="col-md-8 col-sm-8 scrollpoint sp-effect1">
		                        <a class="pull-left" >
                                    <input type="checkbox" ></input>
                                    <!-- th:field="*{roomOption}" -->
                                 </a>
                                 <div class="media-body">
                                     <h3 class="media-heading">풀옵션</h3>
                                 </div>
		                     </div>
				        </div>
			        </div>
		            <div class="container">
		                <div class="row">
		                    <div class="col-md-12">
		                        <div class="row">
		                            <div class="col-md-12 col-sm-12 scrollpoint sp-effect1">
	                                    <div class="form-group">
	                                        <input type="text"  class="form-control" th:field="*{title}" style="color:black;" placeholder="제목"/> 
	                                    </div>
	                                    <div class="form-group">
	                                        <textarea cols="30" rows="10" class="form-control" th:field="*{detail}" style="color:black;" placeholder="상세설명"></textarea>  
	                                    </div>
	                                    <button id="btnSubmit" type="submit" class="btn btn-primary btn-lg">방 등록</button>
		                            </div>
		                        </div>
		                    </div>
		                </div>
		            </div>
		            
		        </section>
<!-- 				<div> -->
<!-- 				    <div id='previewId' -->
<!-- 				        style='width: 300px; height: 300px; color: black; font-size: 9pt;  -->
<!-- 				        border: 2px solid black; position: absolute; left: 300px; top: 1200px;'> -->
<!-- 				    </div> -->
<!-- 		            <input type="file" onchange="previewImage(this,'previewId')"/> -->
<!-- 				</div> -->
				    
	        </div>
        </form>
        <script>
      	$("#popMap").click(function(){
      		$(location).attr("href", "/selectMapPoint.do?"+$(addRoomForm).serialize());
		});
        </script>
        
        
      	<script th:inline="javascript">
        /*<![CDATA[*/
//       	$("#popMap").click(function(){
//       		$(location).attr("href", "/selectMapPoint.do?"+$(addRoomForm).serialize());
// 		});
      	
      	function previewImage(targetObj, previewId) {

            var preview = document.getElementById(previewId); //div id   
            var ua = window.navigator.userAgent;

            if (ua.indexOf("MSIE") > -1) {//ie일때

                targetObj.select();

                try {
                    var src = document.selection.createRange().text; // get file full path 
                    var ie_preview_error = document
                            .getElementById("ie_preview_error_" + previewId);

                    if (ie_preview_error) {
                        preview.removeChild(ie_preview_error); //error가 있으면 delete
                    }

                    var img = document.getElementById(previewId); //이미지가 뿌려질 곳 

                    img.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"
                            + src + "', sizingMethod='scale')";// 이미지 로딩, sizingMethod는 div에 맞춰서 사이즈를 자동조절 하는 역할
                } catch (e) {
                    if (!document.getElementById("ie_preview_error_" + previewId)) {
                        var info = document.createElement("<p>");
                        info.id = "ie_preview_error_" + previewId;
                        info.innerHTML = "a";
                        preview.insertBefore(info, null);
                    }
                }
            } else { //ie가 아닐때
                var files = targetObj.files;
                for ( var i = 0; i < files.length; i++) {

                    var file = files[i];

                    var imageType = /image.*/; //이미지 파일일경우만.. 뿌려준다.
                    if (!file.type.match(imageType))
                        continue;

                    var prevImg = document.getElementById("prev_" + previewId); //이전에 미리보기가 있다면 삭제
                    if (prevImg) {
                        preview.removeChild(prevImg);
                    }

                    var img = document.createElement("img"); //크롬은 div에 이미지가 뿌려지지 않는다. 그래서 자식Element를 만든다.
                    img.id = "prev_" + previewId;
                    img.classList.add("obj");
                    img.file = file;
                    img.style.width = '300px'; //기본설정된 div의 안에 뿌려지는 효과를 주기 위해서 div크기와 같은 크기를 지정해준다.
                    img.style.height = '300px';
                    
                    preview.appendChild(img);

                    if (window.FileReader) { // FireFox, Chrome, Opera 확인.
                        var reader = new FileReader();
                        reader.onloadend = (function(aImg) {
                            return function(e) {
                                aImg.src = e.target.result;
                            };
                        })(img);
                        reader.readAsDataURL(file);
                    } else { // safari is not supported FileReader
                        //alert('not supported FileReader');
                        if (!document.getElementById("sfr_preview_error_"
                                + previewId)) {
                            var info = document.createElement("p");
                            info.id = "sfr_preview_error_" + previewId;
                            info.innerHTML = "not supported FileReader";
                            preview.insertBefore(info, null);
                        }
                    }
                }
            }
        }
      	/*]]>*/  	
		</script>
      </div>
  </body>
</html>
